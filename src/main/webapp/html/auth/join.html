<!DOCTYPE html>
<html>
<head>
<meta charset='UTF-8'>
<title>회원가입 테스트</title>
<link rel="stylesheet" href="../../node_modules/bootstrap/dist/css/bootstrap.css">
<link rel="stylesheet" href="../../css/common.css">
<link rel="stylesheet" href="../../node_modules/sweetalert/dist/sweetalert.css">
</head>
<body>
<div id='header'></div>
<div class='container'>

<!-- 
<h1>회원가입 테스트</h1>
<form>
      이메일<input id='email' type='text' class="form-control" placeholder='예)hong@test.com'>
      비밀번호<input id='password' type='password' class="form-control">
      이름<input id='name' type='text' class="form-control">
  <button id='add-btn'>등록</button>
  </form>
</div>
 -->
 
 
 <div style='padding-top:10px; margin-bottom:10px; margin-top:20px;'>
        <div id='login' style='text-align:center; vertical-align:middle;'>
       <font style='font-size:26px; font-family:Arial; text-align:center;'>회원가입</font><br>
       
       
        <input id='email' type='email' placeholder='E-mail' 
          style='text-align:center; font-size:19px; font-family:Vernada; width:300px; height:30px; margin-top:10px; margin-bottom:10px;'/>
          <button id='emailcheck' type='button' style='position:absolute; margin-top:10px; height:30px;'>중복확인</button>
          <br>
        <input id='names' type='text' placeholder='name' 
          style='text-align:center; font-size:19px; font-family:Vernada; width:300px; height:30px; margin-top:10px; margin-bottom:10px;'/>  
          <br>        
        <input id='password' type='password' placeholder='password' 
          style='text-align:center; font-size:19px; font-family:Vernada; width:300px; height:30px; margin-top:10px;'/>
        
        <input id="fileupload" type="file" name="photo"/>
        <div id='images-div'></div>
        </div>
          
      <div id='joinbutton' style='text-align:center; vertical-align:middle; margin-top:20px;'> 
      <button id='add-btn' style='width:300px; height:38px; background-color:#3DB394'>
      <font color='white' style='font-size:20px; font-family:Vernada; font-weight:500;'>join</font></button>
      </div>
    </div>
 
 
 
 
 
 
 
 
 

 
 
 
 
 </div>
<div id='footer'></div>
<script src="../../node_modules/jquery/dist/jquery.js"></script>
<script src="../../node_modules/bootstrap/dist/js/bootstrap.js"></script>
<script src="../../js/common.js"></script>
<script src="join.js"></script>
<script src="../../node_modules/sweetalert/dist/sweetalert.min.js"></script>

<script src="../../node_modules/blueimp-file-upload/js/vendor/jquery.ui.widget.js"></script>
<script src="../../node_modules/blueimp-load-image/js/load-image.js"></script>
<script src="../../node_modules/blueimp-load-image/js/load-image-meta.js"></script>
<script src="../../node_modules/blueimp-load-image/js/load-image-exif.js"></script>
<script src="../../node_modules/blueimp-load-image/js/load-image-exif-map.js"></script>
<script src="../../node_modules/blueimp-load-image/js/load-image-orientation.js"></script>
<script src="../../node_modules/blueimp-canvas-to-blob/js/canvas-to-blob.js"></script>
<script src="../../node_modules/blueimp-file-upload/js/jquery.iframe-transport.js"></script>
<script src="../../node_modules/blueimp-file-upload/js/jquery.fileupload.js"></script>
<script src="../../node_modules/blueimp-file-upload/js/jquery.fileupload-process.js"></script> 
<script src="../../node_modules/blueimp-file-upload/js/jquery.fileupload-image.js"></script>




<script>
"use strict"

$('#fileupload').fileupload({
  url: 'join.jsp',        // 서버에 요청할 URL
  dataType: 'json',         // 서버가 보낸 응답이 JSON임을 지정하기
  sequentialUploads: true,  // 여러 개의 파일을 업로드 할 때 순서대로 요청하기.
  singleFileUploads: false, // 한 요청에 여러 개의 파일을 전송시키기.
  autoUpload: false,        // 파일을 추가할 때 자동 업로딩 하지 않도록 설정.
  disableImageResize: /Android(?!.*Chrome)|Opera/
        .test(window.navigator && navigator.userAgent), // 안드로이드와 오페라 브라우저는 크기 조정 비활성 시키기
  previewMaxWidth: 800,   // 미리보기 이미지 너비
  previewMaxHeight: 800,  // 미리보기 이미지 높이 
  previewCrop: true,      // 미리보기 이미지를 출력할 때 원본에서 지정된 크기로 자르기
  processalways: function(e, data) {
      console.log('fileuploadprocessalways()...');
      var imagesDiv = $('#images-div');
      var canvas = data.files[0].preview;
      var dataURL = canvas.toDataURL();
      $("<img>").attr('src', dataURL).css('width', '100px').appendTo(imagesDiv);
      $('#upload-btn').click(function() {
          data.submit();
      });
  }, 
  submit: function (e, data) { // 서버에 전송하기 직전에 호출된다.
    console.log('submit()...');
    data.formData = {
        name: $('#name').val(),
        age: $('#age').val()
    };
  }, 
  done: function (e, data) { // 서버에서 응답이 오면 호출된다. 각 파일 별로 호출된다.
    console.log('done()...');
    console.log(data.result);
    var param = data.result.params[0];
    $.each(data.result.params, function(index, param) {
      if (param.filename) {
          $('<p/>').text(param.name + " : " + param.filename + ", " + param.size).appendTo(document.body);
      } else {
          $('<p/>').text(param.name + " : " + param.value).appendTo(document.body);
      }
    });
  }
});

</script>



</body>
</html>









    